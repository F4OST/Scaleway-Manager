<ion-header no-border>
  <ion-navbar>
  </ion-navbar>
</ion-header>

<ion-content>
  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <ion-row margin-top>
    <ion-col>
      <div class="server-header">
        <ion-img class="is-round" width="85" height="85"
                 src="{{ server.image ? (server.image.name | serverIcon) : (server.name | serverIcon) }}"></ion-img>
        <div class="server">
          <div class="server-name">
            {{ serverName }}
          </div>
          <div class="server-state">
            <div [style.background]="state" [class]="stateClass"></div>
            <span class="state-text vertical-align-content">{{ server.state }}</span>
          </div>
          <div class="server-actions">
            <span class="server-toggle-off">OFF</span>
            <ion-toggle [(ngModel)]="power" (ngModelChange)="update($event)" [disabled]="isDisabled('power')"
                        color="secondary"></ion-toggle>
            <span class="server-toggle-on">ON</span>
            <button default ion-button item-right color="dark" type="submit" [disabled]="isDisabled('reboot')"
                    (click)="reboot()">Reboot
            </button>
          </div>
        </div>
      </div>
    </ion-col>
  </ion-row>
  <ion-item-group margin-top>
    <ion-item-divider class="information-header" color="secondary">Basic Informations</ion-item-divider>
    <ion-item (click)="copyToClipBoard(server.public_ip.address)">
      <div class="information-title">
        Public IP
      </div>
      <div id="cpyBtn" data-clipboard-target="#copyTarget" class="information-content" item-end>
        {{ server.public_ip.address }}
      </div>
    </ion-item>
    <ion-item (click)="server.private_ip ? copyToClipBoard(server.private_ip.address): ''">
      <div class="information-title">
        Private IP
      </div>
      <div class="information-content" item-end>
        {{ server.private_ip ? server.private_ip : '-' }}
      </div>
    </ion-item>
    <ion-item>
      <div class="information-title">
        Instance type
      </div>
      <div class="information-content" item-end>
        {{ server.commercial_type }}
      </div>
    </ion-item>
    <ion-item>
      <div class="information-title">
        From image
      </div>
      <div class="information-content" item-end>
        {{ server.image ? server.image.name : '-' }}
      </div>
    </ion-item>
    <ion-item>
      <div class="information-title">
        Volumes
      </div>
      <div class="information-content" item-end>
        {{ server.volumes | totalVolumesSpace }}
      </div>
    </ion-item>
  </ion-item-group>
  <ion-item-group>
    <ion-item-divider class="information-header" color="secondary">Advanced Informations</ion-item-divider>
    <ion-item (click)="server.ipv6 ? copyToClipBoard(server.ipv6.address) : ''">
      <div class="information-title">
        IPV6
      </div>
      <div class="information-content" item-end>
        {{ server.ipv6 ? server.ipv6.address : '-' }}
      </div>
    </ion-item>
    <ion-item>
      <div class="information-title">
        Creation date
      </div>
      <div class="information-content" item-end>
        {{ server.creation_date | date:'dd/MM/yy, H:mm' }}
      </div>
    </ion-item>
    <ion-item>
      <div class="information-title">
        Modification date
      </div>
      <div class="information-content" item-end>
        {{ server.modification_date | date:'dd/MM/yy, H:mm' }}
      </div>
    </ion-item>
  </ion-item-group>
  <ion-item-group>
    <ion-item-divider class="information-header" color="dark">Server actions</ion-item-divider>
    <ion-item>
      <div class="information-title" col-8>
        Archive server
      </div>
      <div class="information-content" col-4 item-end>
        <button default ion-button item-right color="dark" type="submit" [disabled]="isDisabled('archive')"
                (click)="archive()">Archive
        </button>
      </div>
    </ion-item>
    <ion-item>
      <div class="information-title" col-8>
        Delete server
      </div>
      <div class="information-content" col-4 item-end>
        <button default ion-button item-right color="danger" type="submit" [disabled]="isDisabled('delete')"
                (click)="delete()">Delete
        </button>
      </div>
    </ion-item>
  </ion-item-group>

</ion-content>
